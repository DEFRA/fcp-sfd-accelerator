name: PR Approval Bot

on:
  pull_request_review:
    types: [submitted]

jobs:
  comment-on-approval:
    if: github.event.review.state == 'approved'
    runs-on: ubuntu-latest
    steps:
      - name: Post a comment on approval
        uses: peter-evans/create-or-update-comment@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          issue_number: ${{ github.event.pull_request.number }}
          body: |
            **Your PR is now approved 🎉**  
            Before merging, be sure to include `#patch` or `#major` in your commit message if merging either a patch or major version.  
            If merging a minor version, nothing needs to be done as these are automatically handled and deployed by CDP.  
            This will ensure CDP deploys the correct version.  
            Thank you. 👍